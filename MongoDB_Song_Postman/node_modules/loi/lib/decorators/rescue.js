"use strict";
var _a, _b;
Object.defineProperty(exports, "__esModule", { value: true });
exports.LoiDecoratorRescueResolver = exports.LoiDecoratorRescue = void 0;
const t = require("../iots");
const tag_1 = require("../utilties/tag");
class LoiDecoratorRescue extends t.Type {
    constructor(type, rescueValue, name = type.name) {
        super(name, (v) => type.is(v) || type.is(rescueValue), (v, c) => {
            const result = type.validate(v, c);
            return result.isLeft() ? type.validate(rescueValue, c) : result;
        }, (v) => type.encode(v));
        this.type = type;
        this.rescueValue = rescueValue;
        this._tag = 'LoiDecoratorRescue';
        this[_a] = true;
    }
}
exports.LoiDecoratorRescue = LoiDecoratorRescue;
_a = tag_1.loiTagTypeDecorator;
LoiDecoratorRescue._tag = 'LoiDecoratorRescue';
class LoiDecoratorRescueResolver extends t.Type {
    constructor(type, rescueValueResolver, name = type.name) {
        super(name, (v) => type.is(v) || type.is(rescueValueResolver()), (v, c) => {
            const result = type.validate(v, c);
            return result.isLeft() ? type.validate(rescueValueResolver(), c) : result;
        }, (v) => type.encode(v));
        this.type = type;
        this.rescueValueResolver = rescueValueResolver;
        this._tag = 'LoiDecoratorRescueResolver';
        this[_b] = true;
    }
}
exports.LoiDecoratorRescueResolver = LoiDecoratorRescueResolver;
_b = tag_1.loiTagTypeDecorator;
LoiDecoratorRescueResolver._tag = 'LoiDecoratorRescueResolver';
//# sourceMappingURL=rescue.js.map