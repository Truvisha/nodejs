"use strict";
var _a, _b;
Object.defineProperty(exports, "__esModule", { value: true });
exports.LoiDecoratorNotNullable = exports.LoiDecoratorNullable = void 0;
const t = require("../iots");
const tag_1 = require("../utilties/tag");
class LoiDecoratorNullable extends t.Type {
    constructor(type, castValues = [], name = type.name) {
        super(name, (v) => (v === null || castValues.indexOf(v) >= 0) ? true : type.is(v), (v, c) => (v === null || castValues.indexOf(v) >= 0) ? t.success(null) : type.validate(v, c), (v) => (v === null || castValues.indexOf(v) >= 0) ? v : type.encode(v));
        this.type = type;
        this.castValues = castValues;
        this._tag = 'LoiDecoratorNullable';
        this[_a] = true;
    }
}
exports.LoiDecoratorNullable = LoiDecoratorNullable;
_a = tag_1.loiTagTypeDecorator;
LoiDecoratorNullable._tag = 'LoiDecoratorNullable';
class LoiDecoratorNotNullable extends t.Type {
    constructor(type, name = type.name) {
        super(name, (v) => {
            if (v === null)
                return false;
            if (!type.is(v))
                return false;
            const result = type.decode(v);
            if (result.isLeft())
                return false;
            if (result.value === null)
                return false;
            return true;
        }, (v, c) => {
            if (v === null)
                return t.failure(null, c);
            const result = type.validate(v, c);
            if (result.isLeft())
                return result;
            if (result.value === null)
                return t.failure(null, c);
            return result;
        }, (v) => type.encode(v));
        this.type = type;
        this._tag = 'LoiDecoratorNotNullable';
        this[_b] = true;
    }
}
exports.LoiDecoratorNotNullable = LoiDecoratorNotNullable;
_b = tag_1.loiTagTypeDecorator;
LoiDecoratorNotNullable._tag = 'LoiDecoratorNotNullable';
//# sourceMappingURL=nullable.js.map