"use strict";
var _a, _b;
Object.defineProperty(exports, "__esModule", { value: true });
exports.LoiDecoratorNotUndefinedable = exports.LoiDecoratorUndefinedable = void 0;
const t = require("../iots");
const tag_1 = require("../utilties/tag");
class LoiDecoratorUndefinedable extends t.Type {
    constructor(type, castValues = [], name = type.name) {
        super(name, (v) => (v === undefined || castValues.indexOf(v) >= 0) ? true : type.is(v), (v, c) => (v === undefined || castValues.indexOf(v) >= 0) ? t.success(undefined) : type.validate(v, c), (v) => (v === undefined || castValues.indexOf(v) >= 0) ? v : type.encode(v));
        this.type = type;
        this.castValues = castValues;
        this._tag = 'LoiDecoratorUndefinedable';
        this[_a] = true;
    }
}
exports.LoiDecoratorUndefinedable = LoiDecoratorUndefinedable;
_a = tag_1.loiTagTypeDecorator;
LoiDecoratorUndefinedable._tag = 'LoiDecoratorUndefinedable';
class LoiDecoratorNotUndefinedable extends t.Type {
    constructor(type, name = type.name) {
        super(name, (v) => {
            if (v === undefined)
                return false;
            if (!type.is(v))
                return false;
            const result = type.decode(v);
            if (result.isLeft())
                return false;
            if (result.value === undefined)
                return false;
            return true;
        }, (v, c) => {
            if (v === undefined)
                return t.failure(undefined, c);
            const result = type.validate(v, c);
            if (result.isLeft())
                return result;
            if (result.value === undefined)
                return t.failure(undefined, c);
            return result;
        }, (v) => type.encode(v));
        this.type = type;
        this._tag = 'LoiDecoratorNotUndefinedable';
        this[_b] = true;
    }
}
exports.LoiDecoratorNotUndefinedable = LoiDecoratorNotUndefinedable;
_b = tag_1.loiTagTypeDecorator;
LoiDecoratorNotUndefinedable._tag = 'LoiDecoratorNotUndefinedable';
//# sourceMappingURL=undefinedable.js.map