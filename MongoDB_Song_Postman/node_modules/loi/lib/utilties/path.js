"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getJavaScriptContextPath = exports.getRealContextPath = exports.getContextPath = void 0;
const tag_1 = require("./tag");
/** @internal */
function getContextPath(context) {
    return ["$", ...context.slice(1).map((i) => i.key)].join(".");
}
exports.getContextPath = getContextPath;
/** @internal */
function getRealContextPath(context) {
    let last = context[0].type;
    return ["$", ...context.slice(1).filter((i) => {
            const realLast = last;
            last = i.type;
            return !tag_1.isUnionType(realLast);
        }).map((i) => i.key)].join(".");
}
exports.getRealContextPath = getRealContextPath;
/** @internal */
function getJavaScriptContextPath(context) {
    let last = context[0].type;
    return ["$", ...context.slice(1).map((i) => {
            const realLast = last;
            last = i.type;
            if (tag_1.isUnionType(realLast)) {
                return "";
            }
            else if (tag_1.isArrayType(realLast)) {
                return `[${i.key}]`;
            }
            else if (tag_1.isDictType(realLast)) {
                return `[${JSON.stringify(i.key)}]`;
            }
            else {
                return `.${i.key}`;
            }
        })].join("");
}
exports.getJavaScriptContextPath = getJavaScriptContextPath;
//# sourceMappingURL=path.js.map